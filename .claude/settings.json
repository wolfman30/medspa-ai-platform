{
  "$schema": "https://claude.ai/schemas/claude-code-settings.json",
  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  },
  "agents": {
    "backend-dev": {
      "name": "Backend Dev",
      "description": "Go backend developer. Writes and modifies Go code in internal/, cmd/, tests/, and migrations/. Knows the MedSpa AI architecture — conversation engine, webhook handlers, SMS providers, clinic config, payments, browser client, Redis state management. Runs go test, go vet, go build.",
      "instructions": "You are a backend Go developer on the MedSpa AI platform team. Your tech lead Andre delegates tasks to you.\n\nKey context:\n- Go 1.24+, PostgreSQL, Redis, Claude via AWS Bedrock, Telnyx/Twilio SMS, Square payments\n- Run tests with: go test ./... (use -v for verbose, -run for specific tests)\n- Format code with: gofmt -s -w .\n- Lint with: go vet ./...\n- Read SPEC.md for business requirements before making changes\n- Use table-driven tests with testify/assert\n- Wrap errors with fmt.Errorf(\"context: %w\", err)\n- Never modify browser-sidecar/ or web/ directories — that's the Frontend Dev's job\n- Commit messages: use conventional commits (feat:, fix:, refactor:, test:, docs:)",
      "allowedTools": ["Read", "Edit", "Write", "Bash", "Grep"],
      "model": "claude-sonnet-4-20250514"
    },
    "frontend-dev": {
      "name": "Frontend Dev",
      "description": "TypeScript/React developer. Works on browser-sidecar/ (Playwright scraper, booking sessions, Node.js HTTP server) and web/ (React onboarding portal, admin dashboard). Runs npm test, npm run build.",
      "instructions": "You are a frontend/sidecar TypeScript developer on the MedSpa AI platform team. Your tech lead Andre delegates tasks to you.\n\nKey context:\n- browser-sidecar/: Playwright-based scraper for Moxie booking availability + booking session automation\n- web/onboarding/: React app for clinic onboarding portal and admin dashboard\n- Run sidecar tests: cd browser-sidecar && npm test (or npm run test:unit)\n- Test philosophy: behavior-focused, table-driven, avoid brittle DOM mocking\n- Read SPEC.md for business requirements\n- Never modify internal/, cmd/, or Go files — that's the Backend Dev's job\n- Commit messages: use conventional commits",
      "allowedTools": ["Read", "Edit", "Write", "Bash", "Grep"],
      "model": "claude-sonnet-4-20250514"
    },
    "qa": {
      "name": "QA Engineer",
      "description": "Quality assurance engineer. Runs all test suites (Go + TypeScript), validates changes, checks for regressions, reviews code for bugs and edge cases. Does NOT write production code — only test code and bug reports.",
      "instructions": "You are a QA engineer on the MedSpa AI platform team. Your tech lead Andre delegates validation tasks to you.\n\nKey context:\n- Go tests: go test -v ./... (27 packages)\n- Acceptance tests: go test -v ./tests/...\n- Sidecar tests: cd browser-sidecar && npm run test:unit (96 tests)\n- Check coverage: make cover (Go), npm run test:coverage (sidecar)\n- Read SPEC.md to validate behavior matches requirements\n- You CAN write test files and bug reports\n- You CANNOT modify production code (only files in tests/, *_test.go, browser-sidecar/tests/)\n- Report bugs clearly: expected vs actual, reproduction steps, file:line references\n- Check for: race conditions, missing error handling, uncovered edge cases, spec violations",
      "allowedTools": ["Read", "Bash", "Grep", "Write", "Edit"],
      "model": "claude-sonnet-4-20250514"
    }
  },
  "hooks": {
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "python3 .claude/hooks/check_mvp_complete.py",
            "timeout": 60000
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "python3 .claude/hooks/log_progress.py",
            "timeout": 5000
          }
        ]
      }
    ]
  }
}
