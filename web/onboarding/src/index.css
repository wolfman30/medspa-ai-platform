@import "tailwindcss";

@layer base {
  :root {
    --ui-brand: 76 29 149; /* #4c1d95 */
    --ui-brand-2: 49 46 129; /* #312e81 */
    --ui-ink: 15 23 42; /* slate-900 */
  }

  html {
    font-family:
      "Instrument Sans",
      ui-sans-serif,
      system-ui,
      -apple-system,
      "Segoe UI",
      sans-serif;
    text-rendering: geometricPrecision;
  }

  body {
    color: rgb(var(--ui-ink));
    background:
      radial-gradient(1200px circle at 20% 0%, rgba(124, 58, 237, 0.08), transparent 55%),
      radial-gradient(900px circle at 80% 10%, rgba(79, 70, 229, 0.08), transparent 50%),
      linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
    min-height: 100vh;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  ::selection {
    background: rgba(124, 58, 237, 0.2);
  }
}

@layer components {
  .ui-page {
    @apply min-h-screen py-10;
  }

  .ui-container {
    @apply mx-auto max-w-6xl px-4 sm:px-6 lg:px-8;
  }

  .ui-stack {
    @apply space-y-8;
  }

  .ui-card {
    @apply rounded-2xl border border-slate-200/70 bg-white/75 backdrop-blur;
    box-shadow: 0 1px 0 rgba(15, 23, 42, 0.05), 0 24px 55px rgba(15, 23, 42, 0.08);
  }

  .ui-card-solid {
    @apply bg-white;
  }

  .ui-card-header {
    @apply flex flex-wrap items-start justify-between gap-4 border-b border-slate-200/70 px-6 py-4;
  }

  .ui-card-body {
    @apply px-6 py-6;
  }

  .ui-h1 {
    @apply text-2xl sm:text-3xl font-semibold tracking-tight text-slate-900;
  }

  .ui-h2 {
    @apply text-lg font-semibold tracking-tight text-slate-900;
  }

  .ui-muted {
    @apply text-sm text-slate-500;
  }

  .ui-kicker {
    @apply text-xs font-semibold uppercase tracking-[0.16em] text-slate-500;
  }

  .ui-btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-semibold transition-colors;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500/60 focus-visible:ring-offset-2;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .ui-btn-primary {
    @apply text-white bg-gradient-to-r from-violet-600 to-indigo-600 hover:from-violet-500 hover:to-indigo-500;
  }

  .ui-btn-ghost {
    @apply text-slate-700 bg-white/75 hover:bg-white border border-slate-300/80;
  }

  .ui-btn-danger {
    @apply text-white bg-red-600 hover:bg-red-700;
  }

  .ui-btn-dark {
    @apply text-white bg-slate-900 hover:bg-slate-800;
  }

  .ui-input {
    @apply w-full rounded-xl border border-slate-200/80 bg-white/80 px-3 py-2 text-sm text-slate-900 placeholder-slate-400;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500/50 focus-visible:border-violet-300;
  }

  .ui-textarea {
    @apply w-full rounded-xl border border-slate-200/80 bg-white/80 p-3 text-sm text-slate-900 placeholder-slate-400;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500/50 focus-visible:border-violet-300;
  }

  .ui-select {
    @apply w-full rounded-xl border border-slate-200/80 bg-white/80 px-3 py-2 text-sm text-slate-900;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500/50 focus-visible:border-violet-300;
  }

  .ui-label {
    @apply block text-xs font-semibold uppercase tracking-wide text-slate-600;
  }

  .ui-help {
    @apply mt-1 text-xs text-slate-500;
  }

  .ui-badge {
    @apply inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold;
  }

  .ui-badge-success {
    @apply bg-emerald-100 text-emerald-900;
  }

  .ui-badge-warning {
    @apply bg-amber-100 text-amber-900;
  }

  .ui-badge-danger {
    @apply bg-red-100 text-red-900;
  }

  .ui-badge-muted {
    @apply bg-slate-100 text-slate-700;
  }

  .ui-table {
    @apply min-w-full border-separate border-spacing-0;
  }

  .ui-th {
    @apply bg-slate-50/70 px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500;
  }

  .ui-td {
    @apply px-4 py-4 text-sm text-slate-700;
  }

  .ui-row {
    @apply border-t border-slate-200/70;
  }

  .ui-row-hover {
    @apply hover:bg-slate-50/60;
  }

  .ui-topbar {
    @apply sticky top-0 z-40 border-b border-slate-200/70 bg-white/70 backdrop-blur;
  }

  .ui-topbar-accent {
    background: linear-gradient(
      90deg,
      rgba(124, 58, 237, 0) 0%,
      rgba(124, 58, 237, 0.55) 25%,
      rgba(79, 70, 229, 0.55) 50%,
      rgba(76, 29, 149, 0.55) 75%,
      rgba(124, 58, 237, 0) 100%
    );
    height: 1px;
  }

  .ui-brandmark {
    @apply h-9 w-9 rounded-xl;
    background: linear-gradient(135deg, rgb(var(--ui-brand-2)), rgb(var(--ui-brand)));
    box-shadow: 0 14px 35px rgba(76, 29, 149, 0.18);
  }

  .ui-link {
    @apply text-violet-700 hover:text-violet-900;
  }
}

@keyframes uiHoverGradient {
  0% {
    background-position: 0% 0%;
  }
  50% {
    background-position: 100% 100%;
  }
  100% {
    background-position: 0% 0%;
  }
}

@layer components {
  .ui-gradient-text {
    color: rgb(79 70 229); /* fallback when clip-text isn't supported */
  }

  .ui-gradient-text-subtle {
    color: rgb(100 116 139); /* slate-500 fallback */
  }
}

@supports (-webkit-background-clip: text) or (background-clip: text) {
  @layer components {
    .ui-gradient-text,
    .ui-gradient-text-subtle {
      display: inline-block;
      background: linear-gradient(
        130deg,
        rgb(var(--ui-brand-2)) 0%,
        rgb(79 70 229) 40%,
        rgb(124 58 237) 70%,
        rgb(var(--ui-brand)) 100%
      );
      background-size: 240% 240%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      -webkit-text-fill-color: transparent;
      animation: uiHoverGradient 10s ease-in-out infinite;
    }

    .ui-gradient-text-subtle {
      filter: saturate(0.9) brightness(0.95);
      animation-duration: 14s;
    }
  }
}

/* Hover-only animated gradient for topbar nav buttons */
@layer components {
  .ui-topbar .ui-btn-ghost,
  .ui-topbar .ui-btn-dark {
    position: relative;
    z-index: 0; /* create stacking context for the gradient overlay */
    overflow: hidden;
    transform: translateZ(0);
  }

  .ui-topbar .ui-btn-ghost::before,
  .ui-topbar .ui-btn-dark::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: linear-gradient(
      130deg,
      rgb(var(--ui-brand-2)) 0%,
      rgb(79 70 229) 40%,
      rgb(124 58 237) 70%,
      rgb(var(--ui-brand)) 100%
    );
    background-size: 240% 240%;
    opacity: 0;
    transition: opacity 180ms ease;
    z-index: -1;
  }

  .ui-topbar .ui-btn-ghost:hover,
  .ui-topbar .ui-btn-ghost:focus-visible {
    @apply text-white;
    border-color: rgba(255, 255, 255, 0.32);
  }

  .ui-topbar .ui-btn-ghost:hover::before,
  .ui-topbar .ui-btn-ghost:focus-visible::before,
  .ui-topbar .ui-btn-dark:hover::before,
  .ui-topbar .ui-btn-dark:focus-visible::before {
    opacity: 1;
    animation: uiHoverGradient 4s ease-in-out infinite;
  }
}

@media (prefers-reduced-motion: reduce) {
  .ui-gradient-text,
  .ui-gradient-text-subtle {
    animation: none;
  }

  .ui-topbar .ui-btn-ghost:hover::before,
  .ui-topbar .ui-btn-ghost:focus-visible::before,
  .ui-topbar .ui-btn-dark:hover::before,
  .ui-topbar .ui-btn-dark:focus-visible::before {
    animation: none;
  }
}
