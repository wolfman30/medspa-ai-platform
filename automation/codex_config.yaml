model: gpt-5.1-codex-max
working_dir: ../
task_prompt: |
  You are GPT-5.1-Codex-Max acting as an autonomous engineer for the medspa-ai-platform.
  Goals:
    - Align work to docs/revenue-mvp.md (scope, flows) and docs/MVP_STATUS.md (current gaps).
    - Finish Revenue MVP: SMS-only AI receptionist, deposit collection via per-clinic Square OAuth, hosted numbers.
    - Implement per-clinic Square OAuth in deposit flow, hosted missed-call trigger for Telnyx hosted numbers, seed clinic knowledge, and ship end-to-end tested flow.
    - Respect multi-tenancy (X-Org-Id), STOP/HELP, quiet hours, and PCI-safe Square checkout (no PAN handling).
    - Consider medspa-landing UX after Square connect; plan a client-facing onboarding/metrics UI (React suggested) for conversations, deposit links sent, deposits paid, knowledge onboarding forms; include shared/global medspa knowledge + per-clinic uploads.
  Context files to load first:
    - docs/revenue-mvp.md
    - docs/MVP_STATUS.md
    - cmd/api/main.go
    - cmd/conversation-worker/main.go
    - internal/conversation/
    - internal/payments/
    - internal/messaging/
    - internal/http/handlers/
    - medspa-landing repo notes (post-Square connect UX)
  Constraints:
    - Maintain existing tests; add tests for new behavior.
    - No destructive git ops; keep diffs minimal and only necessary comments.
    - If Square OAuth creds are absent, fail gracefully and log.
  Deliverables per session:
    1) Short plan, then code changes with paths.
    2) Notes on tests run/to run.
    3) Next-step suggestions if time expires.
context_globs:
  - docs/revenue-mvp.md
  - docs/MVP_STATUS.md
  - cmd/api/main.go
  - cmd/conversation-worker/main.go
  - internal/conversation/**
  - internal/payments/**
  - internal/messaging/**
  - internal/http/handlers/**
max_runtime_seconds: 1800
branch_prefix: codex-auto-
log_dir: ./logs
env:
  - name: OPENAI_API_KEY
    from_dotenv: true
  - name: REPO_URL
    value: https://github.com/wolfman30/medspa-ai-platform.git
  - name: REPO_PATH
    value: C:/Users/wolfp/ai-agency/medspa-ai-platform
